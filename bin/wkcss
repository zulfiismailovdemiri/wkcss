#!/usr/bin/env php
<?php

// Dynamically determine the correct autoload file
$autoloadFiles = [
    __DIR__ . '/../vendor/autoload.php',        // Autoload for local development
    __DIR__ . '/../../../autoload.php',        // Autoload when installed as a dependency
];

foreach ($autoloadFiles as $autoloadFile) {
    if (file_exists($autoloadFile)) {
        require_once $autoloadFile;
        break;
    }
}

// If no autoload file is found, display an error and exit
if (!class_exists('Composer\Autoload\ClassLoader')) {
    fwrite(STDERR, "Error: Composer autoload file not found. Please run 'composer install'.\n");
    exit(1);
}

use App\CSSGenerator;

// CLI banner
echo "WK CSS Framework CLI\n";
echo "---------------------\n";
echo "Generating CSS files...\n\n";

// Run the CSS generator
$generator = new CSSGenerator();
$generator->writeCSSFiles();

// Success message
echo "CSS files have been generated successfully in the 'output' directory!\n";