#!/usr/bin/env php
<?php

// Dynamically determine the autoload file
$autoloadFiles = [
    __DIR__ . '/../vendor/autoload.php', // Autoload for local development
    __DIR__ . '/../../../autoload.php', // Autoload for when installed as a dependency
];

foreach ($autoloadFiles as $autoloadFile) {
    if (file_exists($autoloadFile)) {
        require_once $autoloadFile;
        break;
    }
}

// If no autoload file is found, throw an error
if (!class_exists('Composer\Autoload\ClassLoader')) {
    fwrite(STDERR, "Error: Autoloader not found. Please run 'composer install' first.\n");
    exit(1);
}

use App\CSSGenerator;

// Display a banner
echo "WK CSS Framework CLI\n";
echo "---------------------\n";
echo "Generating CSS files...\n\n";

// Create a CSSGenerator instance and generate files
$generator = new CSSGenerator();
$generator->writeCSSFiles();

// Success message
echo "CSS files have been generated successfully in the 'output' directory!\n";